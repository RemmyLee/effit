{% extends "layout.html" %}

{% block title %}
<title>Effit - {{ community.name }}</title>
{% endblock %}

{% block styles %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
{% endblock %}

{% block content %}

<div id="community-detail">
    <h2>Community: {{ community.name }}</h2>
    <p>Description: {{ community.description }}</p>
</div>

<div id="posts">
    <h2>All Posts</h2>
    {% for post in posts %}
    <div class="post-item">
        <div class="post">
            <div class="vote">
                <button class="upvote" onclick="vote('{{ post.id }}', 'upvote')">↑</button>
                <span class="score">{{ post.score }}</span>
                <button class="downvote" onclick="vote('{{ post.id }}', 'downvote')">↓</button>
            </div>
            <div class="post-info">
                <h3><a class="title may-blank loggedin" href="{{ url_for('post_detail', community_name=post.community.name, post_slug=post.slug) }}">{{ post.title }}</a></h3>
                <span class="domain">(<a href="{{ url_for('community_posts', community_name=post.community.name) }}">self.{{ post.community.name }}</a>)</span>
                <p class="tagline">
                    <span>{{ post.score }} points</span> 
                    submitted <time datetime="{{ post.created_at.isoformat() }}">{{ post.created_at }}</time>
                    by <a href="{{ url_for('user_posts', username=post.author.username) }}" class="author may-blank id-t2_d2kpf">{{ post.author.username }}</a>
                    to <a href="{{ url_for('community_posts', community_name=post.community.name) }}" class="subreddit hover may-blank">{{ post.community.name }}</a>
                </p>
                <ul class="flat-list buttons">
                    <li class="first">
                        <a href="{{ url_for('post_detail', community_name=post.community.name, post_slug=post.slug) }}" class="bylink comments may-blank" rel="nofollow">
                            {{ post.comments|length }} comments
                        </a>
                    </li>
                    <li class="share"><a class="post-sharing-button">share</a></li>
                    <li class="link-save-button save-button login-required"><a>save</a></li>
                    <li class="give-gold-button"><a href="#" class="give-gold login-required access-required gold-give-gold" rel="nofollow">give award</a></li>
                    <li class="report-button login-required"><a href="#" class="reportbtn access-required">report</a></li>
                    <li class="crosspost-button"><a class="post-crosspost-button">crosspost</a></li>
                </ul>
            </div>
            
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
